var https = require('https');
var options = {
	host : 'api.github.com',
	path: '/users',
	method: 'GET',
 	headers: { 'User-Agent': 'Awesome-Octocat-App' }
};
var getResponse = function(){
	try {
		var request = https.request(options, function(response){
			console.log('server listening');
			var body = '';
			response.on("data", function(chunk){
				body += chunk.toString('utf8');	
			});
	
			response.on("end", function(){
				//console.log("\n body:", body);		
				var json = JSON.parse(body);
				var repos = [];
		
				json.forEach(function(repo){
					//console.log("items:", repo.id);	
					repos.push({
						id : repo.id,
						login: repo.login
					})
				});

				console.log("Count items:", json.length);	
				console.log("\n Items:", repos);
			});
		});
		request.end();
	} catch(ex){
		console.log("Loi:" ,ex);
	}
};

module.exports.getResp = getResponse;
//getResponse();


